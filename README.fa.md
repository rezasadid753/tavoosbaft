<p align="left">
  <a href="README.fa.md">
    <img src="https://img.shields.io/badge/_🇬🇧_English-555?style=flat-square&labelColor=darkblue&color=blue" alt="English">
  </a>
</p>

# **🧵 طاووس بافت**

طاووس بافت ابزاری است که بر بستر زبان پایتون بنا نهاده شده و وظیفه‌اش تولید نقشه‌های کامپیوتریِ اختصاصی برای بافت انواع قالی و فرش است. این سامانه که برای تمام کاربران، از افراد فنی گرفته تا نوآموزان، طراحی شده، فرآیند طراحی، ذخیره‌سازی و تحلیل نقش‌های فرش را با کمترین نیاز به تنظیمات از سوی بافنده، به شکلی خودکار به انجام می‌رساند.

## **🛠️ ویژگی‌ها**

* **خلق خودکار نقش:** قابلیت تولید نقشه‌های متنوع تنها با تنظیم پارامترها.  
* **خروجی بصری:** ذخیره‌سازی طرح‌های خلق‌شده به صورت **فایل تصویری**، که اشتراک‌گذاری و چاپ آن‌ها را برای بافنده بسیار آسان می‌کند.  
* **گزارش جامع عملیات (Log File):** ارائه یک **پرونده گزارش کامل** که شامل تمام جزئیات مربوط به اجرای برنامه، **پالت رنگ نهایی** انتخاب‌شده و نقشه کامل کامپیوتری فرش است.  
* **مناسب برای مبتدیان:** ارائه **دستورالعمل‌های قدم به قدم و واضح** برای کاربرانی که پیش از این تجربه کار با پایتون نداشته‌اند.  
* **نصب سریع و آسان:** راه‌اندازی و نصب تمامی کتابخانه‌های مورد نیاز برنامه تنها با **اجرای یک فرمان ساده**.  
* **استفاده رایگان:** این ابزار دارای **مجوز استفاده شخصی و غیرتجاری** است؛ استفاده از آن در فعالیت‌های تجاری ممنوع می‌باشد.

## **📦 نصب و راه‌اندازی (برای ویندوز)**

### **۱. نصب پایتون**

اگر پایتون را قبلا نصب نکردید:

* پایتون را از [python.org](https://www.python.org/downloads/) دانلود کنید.  
* نصب‌کننده را اجرا کرده و در هنگام نصب، تیک گزینه **“Add Python to PATH”** را بزنید.

### **۲. دانلود اسکریپت طاووس بافت**

* به [مخزن گیت‌هاب](https://www.google.com/search?q=https://github.com/rezasadid753/tavoosbaft) مراجعه کنید.  
* روی دکمه سبز رنگ “Code” کلیک کرده، سپس “Download ZIP” را انتخاب کنید.  
* فایل ZIP را در یک پوشه (مثلاً C:\\TavoosBaft) استخراج کنید.

### **۳. نصب کتابخانه‌های مورد نیاز**

**Command Prompt** را باز کنید (کلیدهای Win \+ R را فشار داده، cmd را تایپ کرده و Enter بزنید).  
به پوشه‌ای که اسکریپت را در آن ذخیره کرده‌اید، بروید:  
cd C:\\TavoosBaft

تمام کتابخانه‌های مورد نیاز را با یک دستور نصب کنید:  
pip install pillow numpy matplotlib

## **🖱️ راهنمای استفاده**

۱. **Command Prompt** را باز کرده و به پوشه اسکریپت بروید:  
cd C:\\TavoosBaft

۲. **اجرای اسکریپت**:  
python tavoosbaft.py image="/abs/path" color="Integer" rajshomar="Integer" widthcm="Integer" or widthpx="Integer"

\<details\>  
\<summary\>توضیحات ساختار دستور\</summary\>  
هنگام اجرای اسکریپت، مطمئن شوید که مقادیر پیش‌فرض را با داده‌های خاص جایگزین می‌کنید. باید پارامترهای image، color، و rajshomar را به همراه دقیقاً یکی از پارامترهای عرض (widthcm یا widthpx) ارائه دهید.

* **image="/abs/path"**: مسیر فایل تصویر شما.  
  * **مثال**: image="C:/Users/YourName/Desktop/my\_design.png" (توجه داشته باشید که اسلش‌های رو به جلو اغلب بهتر عمل می‌کنند).  
  * **فرمت‌های پشتیبانی شده**: فایل باید با فرمت‌های .jpg، .jpeg، یا .png باشد.  
* **color="Integer"**: تعداد رنگ هدف، $K$، در طرح خروجی نهایی را تنظیم می‌کند.  
  * **مثال**: color="90". این به این معنی است که پردازش تصویر، پالت رنگ اصلی را حداکثر به ۹۰ رنگ متمایز با استفاده از کاهش K (K-reduction) کاهش می‌دهد.  
* **rajshomar="Integer"**: مقدار **رج شمار** (تراکم) را برای محاسبه الگوی منسوجات مشخص می‌کند.  
  * **مثال**: rajshomar="46". این مقدار ظرافت ساختار بافتنی نهایی را تعیین می‌کند.  
* **widthcm="Integer"** **یا** **widthpx="Integer"**: **فقط یکی از این دو پارامتر را استفاده کنید.**  
  * **widthcm**: عرض فیزیکی منسوجات نهایی را بر حسب **سانتی‌متر** تعریف می‌کند.  
    * **مثال**: widthcm="150".  
  * **widthpx**: عرض طرح را بر حسب **پیکسل** تعریف می‌کند. این مقدار اغلب مستقیماً با **تعداد گره** (Knot Count) یا عرض ساختار بافت شناخته شده‌ای که برای آن طراحی می‌کنید، مطابقت دارد.  
    * **مثال**: widthpx="800".

| پارامتر | نوع | توضیحات | مثال | نکات |
| ----: | ----: | ----: | ----: | ----: |
| image | رشته (String) | مسیر فایل تصویر(.jpg، .jpeg، یا .png). | image="C:\\Users\\John\\Desktop\\design.jpg" | مسیر باید کامل و مطلق باشد. |
| color | عدد صحیح (Integer) | تعداد رنگ نهایی در طرح خروجی. | color="90" | این خروجی طرح را به ۹۰ رنگ متمایز محدود می‌کند. |
| rajshomar | عدد صحیح (Integer) | مقدار **رج شمار** برای محاسبه الگوی منسوجات. | rajshomar="46" | این مقدار ظرافت/وضوح ساختار بافتنی را تعیین می‌کند. |
| widthcm | عدد صحیح (Integer) | عرض نهایی مورد نظر منسوجات بر حسب **سانتی‌متر**. | widthcm="200" | از این برای تعیین ابعاد فیزیکی استفاده کنید. **فقط یکی** از widthcm یا widthpx را استفاده کنید. |
| widthpx | عدد صحیح (Integer) | عرض نهایی مورد نظر طرح بر حسب **تعداد گره**. | widthpx="800" | **فقط یکی** از widthcm یا widthpx را استفاده کنید. |

\</details\>  
۳. **فایل‌های خروجی:**

* **فایل تصویری:** طرح تولید شده در همان پوشه ذخیره می‌شود (مثلاً image.png).  
* **فایل گزارش (Log File):** هر اجرا یک فایل گزارش (مثلاً image.png) تولید می‌کند که جزئیات مراحل پردازش، پارامترها، پالت رنگ نهایی مرتب شده، نقشه کامپیوتری و هرگونه خطای مواجه شده را شرح می‌دهد.

## **📂 جزئیات خروجی**

* **فایل تصویری:** حاوی نمایش بصری طرح منسوجات شماست.  
* **فایل گزارش (Log File):** شامل موارد زیر است:  
  * برچسب زمانی اجرا  
  * پارامترهای مورد استفاده برای تولید (مانند K رنگ هدف، ابعاد تغییر اندازه)  
  * شرح گام به گام الگوریتم (مانند همگرایی K-Means، مرتب‌سازی Luma)  
  * فهرستی از تمام رنگ‌های کاهش یافته K (مقادیر R، G، B) به ترتیب مرتب شده‌شان.  
  * نقشه کامپیوتری همراه با مساحت درصدی محاسبه شده و ردیف‌ها/ستون‌های پیکسل مربوطه.

## **✨ نمونه کار: گردش در باغ (اثر هانس زاتزکا)**

این بخش یک مثال زیبا از یک اثر هنری مشهور را که توسط طاووس بافت پردازش شده است، ارائه می‌دهد. خروجی نهایی یک تصویر با رنگ کاهش یافته و اندازه کوچک شده، و کدهای کامپیوتری مربوطه است که برای بافت آماده می‌باشد.

### **تصویر اصلی در مقابل تصویر پردازش شده**

| تصویر هنری اصلی | تصویر نقشه بافت پردازش شده |
| ----: | ----: |
|  |  |
| اثر هنری **اصلی** و با رنگ کامل. | تصویر **کاهش یافته** (عرض \= ۳۵۰ پیکسل، رنگ \= ۹۰) که برای تولید کدها استفاده شده است. |

### **کدهای قابل دانلود و پالت رنگ**

اسکریپت طاووس بافت تصویر را پردازش کرده و یک فایل گزارش جامع تولید می‌کند. برای سهولت استفاده، دو نسخه PDF با طرح بصری زیباتر بصورت دستی از فایل گزارش تهیه شده که جزئیات رنگ ها و کدهای کامپیوتری را بهتر نشان می‌دهد:

* [**دانلود فایل الگوی کدگذاری شده (codes.pdf)**](https://www.google.com/search?q=Showcases/Floral%2520Ladies%2520and%2520Bird%2520Hans%2520Zatzka%2520Classic%2520Flowers/codes.pdf)  
* [**دانلود فایل پالت رنگ (colors.pdf)**](https://www.google.com/search?q=Showcases/Floral%2520Ladies%2520and%2520Bird%2520Hans%2520Zatzka%2520Classic%2520Flowers/colors.pdf)

### **💖 مشارکت‌های شما**

طاووس بافت ابزاری برای همگان است. اگر کدهای کامپیوتری نقشه زیبای خود را با استفاده از طاووس بافت تولید کرده‌اید، خوشحال می‌شویم آن‌ها را در اینجا به نمایش بگذاریم\!  
**لطفاً موارد زیر را ارسال کنید:**

* **فایل‌های گزارش (Log Files)** یا **codes.pdf** و **colors.pdf** که ایجاد می‌کنید.  
* **تصویر اصلی** که استفاده کرده‌اید.  
* **تصاویری از فرش** یا منسوجات بافته شده نهایی شما\!

لطفاً تمام آثار ارسالی را به **rezasadid753@gmail.com** ارسال کنید تا با نام شما در اینجا منتشر شود. از شما سپاسگزاریم که هنر بافت را دیجیتال و در دسترس قرار می‌دهید\!

## **📊 نمودار**

```mermaid
graph TD  
    A\[User Runs tavoosbaft.py\] \--\> B\[Environment Check\]  
    B \--\> C\[Parameter Processing\]

    subgraph "Parameter Handling"  
        C \--\> C1\[Read Input Parameters\]  
        C1 \--\> C3\[Parameters Object\]  
        C3 \--\> |Contains| C4\["- width: int  
        \- height: int  
        \- pattern\_type: str  
        \- color\_scheme: dict"\]  
    end

    subgraph "Pattern Generation"  
        D\[Pattern Generator\] \--\> D1\[Create Empty NumPy Array\]  
        D1 \--\> D6\[2D NumPy Array\]  
    end

    subgraph "Image Processing"  
        E\[Image Creation\] \--\> E1\[Convert Array to Image\]  
        E1 \--\> |Using PIL| E2\[Apply Color Mapping\]  
        E2 \--\> |RGB Values| E3\[Create Image Object\]  
    end

    subgraph "File Operations"  
        F\[File Handling\] \--\> F1\[Generate Filename\]  
        F1 \--\> |timestamp\_pattern.png| F2\[Save Image\]  
        F1 \--\> |timestamp\_log.txt| F3\[Create Log Entry\]  
    end

    subgraph "Output & Logging"  
        G\[Status Handling\] \--\> G1\[Write Log File\]  
        G1 \--\> |Contains| G2\["- برچسب زمانی  
        \- پارامترهای مورد استفاده  
        \- زمان پردازش  
        \- کد وضعیت  
        \- داده‌های نقشه منسوجات  
        \- پالت رنگ مورد استفاده"\]  
        G \--\> G3\[Console Output\]  
        G3 \--\> |Display| G4\["- پیام موفقیت/خطا  
        \- محل ذخیره فایل  
        \- خلاصه پردازش"\]  
    end

    C3 \--\> D  
    D6 \--\> E  
    E3 \--\> F  
    F2 & F3 \--\> G

    classDef process fill:\#f9f,stroke:\#333,stroke-width:2px;  
    classDef data fill:\#bbf,stroke:\#333,stroke-width:2px;  
    classDef io fill:\#bfb,stroke:\#333,stroke-width:2px;  
      
    class A,B,C,D,E,F,G process;  
    class C3,D6,E3 data;  
    class F1,F2,F3,G3 io;
```

## **📝 مجوز**

**طاووس بافت** تحت مجوز **Creative Commons Attribution-NonCommercial 4.0 International Public License (CC BY-NC 4.0)** منتشر شده است.  
این بدان معناست که شما اجازه دارید این ابزار را **فقط برای مقاصد شخصی و غیرتجاری** استفاده، اصلاح و توزیع کنید. هرگونه استفاده تجاری اکیداً ممنوع است. همچنین باید حقوق مؤلف اصلی را رعایت کنید.

## **💡 پشتیبانی**

برای پرسش‌ها یا مشکلات، لطفاً در [مخزن گیت‌هاب](https://www.google.com/search?q=https://github.com/rezasadid753/tavoosbaft/issues) یک issue باز کنید.
